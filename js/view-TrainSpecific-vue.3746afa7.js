(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-TrainSpecific-vue","view-RequestRadio-vue"],{"26e5":function(t,e,s){},"4bd4":function(t,e,s){"use strict";s("26e5");var i=s("94ab");e["a"]={name:"v-form",mixins:[Object(i["b"])("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,s=function(t){return t.$watch("hasError",function(s){e.$set(e.errorBag,t._uid,s)},{immediate:!0})},i={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=s(t)))}):i.valid=s(t),i},validate:function(){var t=this.inputs.filter(function(t){return!t.validate(!0)}).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find(function(e){return e._uid===t._uid});if(e){var s=this.watchers.find(function(t){return t._uid===e._uid});s.valid&&s.valid(),s.shouldValidate&&s.shouldValidate(),this.watchers=this.watchers.filter(function(t){return t._uid!==e._uid}),this.inputs=this.inputs.filter(function(t){return t._uid!==e._uid}),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},"887e":function(t,e,s){"use strict";var i=s("a205"),a=s.n(i);a.a},"94ab":function(t,e,s){"use strict";s.d(e,"a",function(){return o}),s.d(e,"b",function(){return u});var i=s("2b0e"),a=s("d9bd");function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function r(t,e){return function(){return Object(a["b"])("The "+t+" component must be used inside a "+e)}}function o(t,e,s){var a=e&&s?{register:r(e,s),unregister:r(e,s)}:null;return i["default"].extend({name:"registrable-inject",inject:n({},t,{default:a})})}function u(t){return i["default"].extend({name:"registrable-provide",methods:{register:null,unregister:null},provide:function(){return n({},t,{register:this.register,unregister:this.unregister})}})}},a205:function(t,e,s){},a5eb:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",[s("input",{attrs:{type:"radio"},domProps:{checked:t.val===t.value},on:{change:t.onChange}}),s("span",[t._t("default")],2)])},a=[],n=s("9ab4"),r=s("60a3");let o=class extends r["c"]{onChange(){this.$emit("input",this.val)}};n["__decorate"]([Object(r["b"])()],o.prototype,"val",void 0),n["__decorate"]([Object(r["b"])()],o.prototype,"value",void 0),o=n["__decorate"]([Object(r["a"])({components:{}})],o);var u=o,c=u,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},e251:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"request-options"},[t.message?s("NotificationMessage",{attrs:{msg:t.message,light:""},on:{close:function(e){t.message=null}}}):t._e(),3!==t.slide?s("img",{staticClass:"avatar",attrs:{src:t.avatar}}):t._e(),1===t.slide?s("div",{staticClass:"slide sm-space"},[s("div",{staticClass:"name text-xs-center"},[t._v(t._s(t.trainerName))]),s("div",{staticClass:"rate s20 text-xs-center hidden-sm-and-up"},t._l(Math.round(t.trainer.AverageRating),function(t){return s("span",{staticClass:"yp__star"})}),0),s("div",{staticClass:"description hidden-sm-and-up"},[t._v(t._s(t.trainer.ProfileDescription))]),s("div",{staticClass:"radio-group",class:"chk-"+t.durations.indexOf(t.requestDuration)},[(t.isSubscribed,s("RequestRadio",{attrs:{val:t.durations[0]},model:{value:t.requestDuration,callback:function(e){t.requestDuration=e},expression:"requestDuration"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.min")))])])),(t.isSubscribed,s("RequestRadio",{attrs:{val:t.durations[1]},model:{value:t.requestDuration,callback:function(e){t.requestDuration=e},expression:"requestDuration"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.mins")))])]))],1),s("div",{staticClass:"radio-group rq-type",class:"h-"+t.types.length+" chk-"+t.types.indexOf(t.requestType)},t._l(t.types,function(e,i){return s("RequestRadio",{key:i,attrs:{val:t.types[i]},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},[s("strong",[t._v(t._s(t.capitalize(t.whichType(e))))]),t._v(" "+t._s(t.typeDesc[t.whichType(e)]))])}),1),s("div",{staticClass:"btn-group hidden-sm-and-down"},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("close")))]),s("button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.bookingAvailability}},[t._v(t._s(t.$t("selectTime")))])]),s("div",{staticClass:"btn-group fixed hidden-md-and-up"},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("close")))]),s("button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.bookingAvailability}},[t._v(t._s(t.$t("selectTime")))])])]):t._e(),2===t.slide?s("div",{staticClass:"slide"},[s("div",{staticClass:"h5 text-xs-center hidden-xs-only"},[t._v(t._s(t.trainerName+" â€¢ "+(30===t.requestDuration?25:55)+"min "+t.capitalize(t.whichType(t.requestType))))]),s("div",{staticClass:"h5 text-xs-center hidden-sm-and-up mb-0"},[t._v(t._s(""+t.trainerName))]),s("div",{staticClass:"h5 text-xs-center font-weight-regular hidden-sm-and-up mb-3"},[t._v(t._s((30===t.requestDuration?25:55)+"min "+t.capitalize(t.whichType(t.requestType))))]),s("div",{staticClass:"book-data-live"},[t.hours.length?s("ul",{staticClass:"days"},t._l(t.days,function(e){return s("li",{key:e},[s("div",{staticClass:"h5"},[t._v(t._s(t.getDayLabel(e)))]),s("ul",{staticClass:"times"},t._l(t.hours,function(i){return s("li",{key:i.TimeSlot.Start},[t.checkDay(e,i)?s("button",{on:{"~click":function(e){return t.setBooking(i)}}},[t._v(t._s(t.setHour(i)))]):t._e()])}),0)])}),0):s("div",{staticClass:"h5 no-terms text-xs-center"},[t._v(t._s(t.$t("trainSpecific.text1")))])]),s("button",{staticClass:"close hidden-xs-only",attrs:{type:"button"},on:{click:t.goBackToType}},[t._v(t._s(t.$t("close")))]),s("div",{staticClass:"btn-group fixed hidden-md-and-up"},[s("button",{staticClass:"close ma-0",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("close")))])])]):t._e(),3===t.slide?s("div",{staticClass:"slide"},[s("CardPayment",{attrs:{duration:t.requestDuration},on:{postBooking:t.postBooking,cardError:t.notifyCardErr,close:function(e){return t.$emit("close")}}})],1):t._e()],1)},a=[],n=s("9ab4"),r=s("60a3"),o=s("e0cf"),u=s("b99e"),c=s("a5eb"),l=s("fde4"),d=s("59ef"),h=s("88c3");let p=class extends r["c"]{constructor(){super(...arguments),this.slide=1,this.systemTime="",this.durations=[30,60],this.types=[],this.requestDuration=this.durations[0],this.requestType=1,this.isSubscribed=null,this.typeDesc={hatha:h["a"].t("hatha"),ashtanga:h["a"].t("astanga"),vinyasa:h["a"].t("vinayasa"),freeform:h["a"].t("freeform"),yin:h["a"].t("yin")},this.avatar=null,this.trainerName=null,this.sessionTickets=0,this.daysInWeek=[h["a"].t("sunday"),h["a"].t("monday"),h["a"].t("tuesday"),h["a"].t("wednesday"),h["a"].t("thursday"),h["a"].t("friday"),h["a"].t("saturday")],this.days=[],this.hours=[],this.availableDates=[],this.booking=null,this.message=null,this.leadZero=(t=>t<10?t<0?"00":`0${t}`:`${t}`)}created(){this.getSubscription(),this.getSessionTickets()}notifyCardErr(t){this.slide=1,this.message=t}getSessionTickets(){u["a"].client.call.sessionTickets.get().response.then(t=>{this.sessionTickets=t.length}).catch(t=>{})}getSubscription(){u["a"].client.call.subscriptions.get().response.then(t=>{this.isSubscribed=t})}mounted(){this.avatar=this.trainer.ProfilePictureUrl||`${s("fad5")}`,this.trainerName=`${this.trainer.FirstName} ${this.trainer.LastName}`,this.types=this.trainer.TrainingTypes.sort(),this.requestType=this.requestType&&-1!==this.types.indexOf(this.requestType)?this.requestType:this.types[0]}getSystemTime(){return u["a"].client.call.system.Time().response.then(t=>t.Time)}setBooking(t){this.booking=t,this.slide=3}goBackToType(){this.$emit("close")}bookingAvailability(){void 0===this.isSubscribed&&0===this.sessionTickets||null===this.isSubscribed&&0===this.sessionTickets?this.$emit("openPlan"):u["a"].client.call.trainer.availability(this.trainer.Id,this.requestDuration).response.then(t=>this.populateDaysHours(t)).then(()=>{this.getSystemTime().then(t=>{this.systemTime=t,this.slide=2})}).catch(t=>{throw t})}postBooking(){const t=this.booking;u["a"].client.call.booking.specific(this.trainer.Id,t.Id,this.requestType,this.requestDuration).response.then(()=>{this.$emit("modal",this.requestDuration,this.requestType,this.formatTermin(t),this.trainer.FirstName),this.$emit("close")}).catch(t=>{throw this.$emit("modalErr",t),t})}formatTermin(t){const e=this.setHour(t);let s=this.getDayLabel(t.TimeSlot.Start);return-1!==[h["a"].t("today"),h["a"].t("tomorrow")].indexOf(s.toLowerCase())&&(s=s.toLowerCase()),`${s} at ${e}`}populateDaysHours(t){this.hours=t,t.forEach(t=>{const e=new Date(t.TimeSlot.Start).getDate();-1===this.availableDates.indexOf(e)&&(this.availableDates.push(e),this.days.push(t.TimeSlot.Start))}),this.days.sort()}getDayLabel(t){const e=new Date(t),s=new Date,i=new Date;return i.setDate(s.getDate()+1),e.getDate()===s.getDate()?h["a"].t("today").toString():e.getDate()===i.getDate()?h["a"].t("tomorrow").toString():`${this.daysInWeek[new Date(t).getDay()]} ${new Date(t).getMonth()+1}/${new Date(t).getDate()}`}checkDay(t,e){const s=new Date(t),i=new Date(e.TimeSlot.Start);if(s.getDay()===new Date(this.systemTime).getDay()){const t=new Date(this.systemTime);return t.setMinutes(t.getMinutes()+10),s.getDate()===i.getDate()&&i>t}return s.getDate()===i.getDate()}setHour(t){return this.amPm(new Date(t.TimeSlot.Start).getHours(),new Date(t.TimeSlot.Start).getMinutes())}amPm(t,e){const s=e&&e<10?this.leadZero(e):e;return t>12?`${t%12}${s?":"+s:""}pm`:t<12?`${t}${s?":"+s:""}am`:`12${s?":"+s:""}pm`}whichType(t){return o["c"][t]}capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)}};n["__decorate"]([Object(r["b"])()],p.prototype,"trainer",void 0),p=n["__decorate"]([Object(r["a"])({components:{CardPayment:l["default"],NotificationMessage:d["default"],RequestRadio:c["default"]}})],p);var m=p,f=m,v=(s("887e"),s("2877")),g=s("6544"),y=s.n(g),b=s("4bd4"),_=Object(v["a"])(f,i,a,!1,null,"c16cea3a",null);e["default"]=_.exports;y()(_,{VForm:b["a"]})},fad5:function(t,e,s){t.exports=s.p+"img/avatar-dummy.10e80969.jpg"}}]);
//# sourceMappingURL=view-TrainSpecific-vue.3746afa7.js.map