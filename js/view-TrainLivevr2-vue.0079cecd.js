(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-TrainLivevr2-vue","view-RequestRadio-vue"],{"26e5":function(t,e,s){},"4bd4":function(t,e,s){"use strict";s("26e5");var i=s("94ab");e["a"]={name:"v-form",mixins:[Object(i["b"])("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,s=function(t){return t.$watch("hasError",function(s){e.$set(e.errorBag,t._uid,s)},{immediate:!0})},i={_uid:t._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=s(t)))}):i.valid=s(t),i},validate:function(){var t=this.inputs.filter(function(t){return!t.validate(!0)}).length;return!t},reset:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,e=this.inputs.length;e--;)this.inputs[e].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(t){var e=this.watchInput(t);this.inputs.push(t),this.watchers.push(e)},unregister:function(t){var e=this.inputs.find(function(e){return e._uid===t._uid});if(e){var s=this.watchers.find(function(t){return t._uid===e._uid});s.valid&&s.valid(),s.shouldValidate&&s.shouldValidate(),this.watchers=this.watchers.filter(function(t){return t._uid!==e._uid}),this.inputs=this.inputs.filter(function(t){return t._uid!==e._uid}),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},8725:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-form",{staticClass:"request-options"},[1===t.slide?s("div",{staticClass:"slide sm-space"},[s("div",{staticClass:"h5 text-xs-center"},[t._v(t._s(t.$t("home.student.trainLive.selectSession")))]),s("div",{staticClass:"radio-group rq-gender",class:"chk-"+t.genders.indexOf(t.requestGender)},[s("RequestRadio",{attrs:{val:t.genders[0]},model:{value:t.requestGender,callback:function(e){t.requestGender=e},expression:"requestGender"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.any")))])]),s("RequestRadio",{attrs:{val:t.genders[1]},model:{value:t.requestGender,callback:function(e){t.requestGender=e},expression:"requestGender"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.male")))])]),s("RequestRadio",{attrs:{val:t.genders[2]},model:{value:t.requestGender,callback:function(e){t.requestGender=e},expression:"requestGender"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.female")))])])],1),s("div",{staticClass:"radio-group rq-type",class:"chk-"+t.types.indexOf(t.requestType)},[s("RequestRadio",{attrs:{val:t.types[0]},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.yoga")))]),t._v(" "+t._s(t.$t("home.student.trainLive.yogaName")))]),s("RequestRadio",{attrs:{val:t.types[1]},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.yoga1")))]),t._v(" "+t._s(t.$t("home.student.trainLive.yogaName1")))]),s("RequestRadio",{attrs:{val:t.types[2]},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.yoga2")))]),t._v(" "+t._s(t.$t("home.student.trainLive.yogaName2")))]),s("RequestRadio",{attrs:{val:t.types[3]},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.yoga3")))]),t._v(" "+t._s(t.$t("home.student.trainLive.yogaName3")))]),s("RequestRadio",{attrs:{val:t.types[4]},model:{value:t.requestType,callback:function(e){t.requestType=e},expression:"requestType"}},[s("strong",[t._v(t._s(t.$t("home.student.trainLive.yoga4")))]),t._v(" "+t._s(t.$t("home.student.trainLive.yogaName4")))])],1),s("button",{staticClass:"submit hidden-xs-only",attrs:{type:"button"},on:{click:t.bookingAvailability}},[t._v(t._s(t.$t("home.student.trainLive.selectTime")))]),s("div",{staticClass:"btn-group fixed hidden-md-and-up"},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("home.student.trainLive.close")))]),s("button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.bookingAvailability}},[t._v(t._s(t.$t("home.student.trainLive.selectTime")))])])]):t._e(),2===t.slide?s("div",{staticClass:"slide"},[s("div",{staticClass:"h5 text-xs-center"},[t._v(t._s(t.$t("home.student.trainLive.selectTime")))]),s("div",{staticClass:"book-data-live"},[t.hours.length?s("ul",{staticClass:"days"},t._l(t.days,function(e){return t.isDayHasSlots(e)?s("li",{key:e},[s("div",{staticClass:"h5"},[t._v(t._s(t.getDayLabel(e)))]),s("ul",{staticClass:"times"},t._l(t.hours,function(i){return s("li",{key:i.TimeSlot.Start},[t.checkDay(e,i)?s("button",{attrs:{disabled:!t.isEmailVerified},on:{click:function(e){return t.setBooking(i)}}},[t._v(t._s(t.setHour(i)))]):t._e()])}),0)]):t._e()}),0):s("div",{staticClass:"h5 no-terms text-xs-center"},[t._v(t._s(t.$t("home.student.trainLive.noTerms")))])]),s("div",{staticClass:"btn-group hidden-sm-and-down"},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.showDefaultPanel}},[t._v(t._s(t.$t("home.student.trainLive.close")))]),t.isEmailVerified?t._e():s("button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.sendVerificationEmail}},[t._v(t._s(t.$t("home.student.trainLive.verifyEmail")))])]),s("div",{staticClass:"btn-group fixed hidden-md-and-up"},[s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("home.student.trainLive.close")))]),t.isEmailVerified?t._e():s("button",{staticClass:"submit",attrs:{type:"button"},on:{click:t.sendVerificationEmail}},[t._v(t._s(t.$t("home.student.trainLive.verifyEmail")))])])]):t._e(),3===t.slide?s("div",{staticClass:"slide"},[s("CardPayment",{attrs:{duration:t.requestDuration},on:{postBooking:t.postBooking,close:t.showDefaultPanel}})],1):t._e()])},a=[],n=s("9ab4"),r=s("60a3"),o=s("e0cf"),u=s("b99e"),l=s("eca9"),d=s("a5eb"),c=s("fde4"),h=s("88c3");let m=class extends r["c"]{constructor(){super(...arguments),this.durations=[30,60],this.types=[o["c"].vinyasa,o["c"].yin,o["c"].hatha,o["c"].ashtanga,o["c"].freeform],this.genders=[o["a"].any,o["a"].male,o["a"].female],this.requestDuration=this.durations[1],this.requestType=this.types[2],this.requestGender=this.genders[0],this.slide=1,this.daysInWeek=[h["a"].t("sunday"),h["a"].t("monday"),h["a"].t("tuesday"),h["a"].t("wednesday"),h["a"].t("thursday"),h["a"].t("friday"),h["a"].t("saturday")],this.days=[],this.hours=[],this.availableDates=[],this.booking=null,this.systemTime="",this.leadZero=(t=>t<10?t<0?"00":`0${t}`:`${t}`)}getSystemTime(){return u["a"].client.call.system.Time().response.then(t=>t.Time)}get isEmailVerified(){return l["a"].isReady?l["a"].profile.IsMobileVerified:null}sendVerificationEmail(){u["a"].client.call.account.requestEmailAddressVerification().response.then(()=>{this.$emit("modalEmailVerify","A verification link has been sent to your email address - please click the link")})}setBooking(t){this.booking=t,this.slide=3}showDefaultPanel(){this.slide=1,this.$emit("close")}bookingAvailability(){this.getSystemTime().then(t=>{this.systemTime=t;const e=new Date(t),s=new Date(t);s.setUTCDate(e.getUTCDate()+7),u["a"].client.call.booking.bookingAvailability(e,s,this.requestDuration,this.requestType,this.requestGender,!0).response.then(t=>{this.populateDaysHours(t),this.slide=2}).catch(t=>{throw t})})}populateDaysHours(t){this.hours=t,t.forEach(t=>{const e=new Date(t.TimeSlot.Start).getDate();-1===this.availableDates.indexOf(e)&&(this.availableDates.push(e),this.days.push(t.TimeSlot.Start))})}getDayLabel(t){const e=new Date(t),s=new Date,i=new Date;return i.setDate(s.getDate()+1),e.getDate()===s.getDate()?h["a"].t("today").toString():e.getDate()===i.getDate()?h["a"].t("tomorrow").toString():`${this.daysInWeek[new Date(t).getDay()]} ${new Date(t).getMonth()+1}/${new Date(t).getDate()}`}checkDay(t,e){const s=new Date(t),i=new Date(e.TimeSlot.Start);if(s.getDay()===new Date(this.systemTime).getDay()){const t=new Date(this.systemTime);return t.setMinutes(t.getMinutes()+10),s.getDate()===i.getDate()&&i>t}return s.getDate()===i.getDate()}isDayHasSlots(t){const e=new Date(t).getDate(),s=this.hours.filter(t=>e===new Date(t.TimeSlot.Start).getDate());return!!s.length}setHour(t){return this.amPm(new Date(t.TimeSlot.Start).getHours(),new Date(t.TimeSlot.Start).getMinutes())}amPm(t,e){const s=e&&e<10?this.leadZero(e):e;return t>12?`${t%12}${s?":"+s:""}pm`:t<12?`${t}${s?":"+s:""}am`:`12${s?":"+s:""}pm`}postBooking(){const t=this.booking;this.getTimeDescription(new Date(t.TimeSlot.Start));u["a"].client.call.booking.any(t.Id,this.requestType,this.requestDuration,this.requestGender,!0).response.then(()=>{this.slide=1,this.$emit("modal",this.requestDuration,this.requestType,this.formatTermin(t))}).catch(t=>{throw this.slide=1,this.$emit("modalErr",t),t})}formatTermin(t){const e=this.setHour(t);let s=this.getDayLabel(t.TimeSlot.Start);return-1!==[h["a"].t("home.student.trainLive.today"),h["a"].t("home.student.trainLive.tomorrow")].indexOf(s.toLowerCase())&&(s=s.toLowerCase()),`${s} at ${e}`}getTimeDescription(t){const e=new Date((new Date).toUTCString()),s=e.getTime(),i=t.getTime();return i<s?h["a"].t("home.student.trainLive.past"):i-s<36e5?h["a"].t("home.student.trainLive.now"):i-s<864e5&&e.getDay()===t.getDay()?h["a"].t("home.student.trainLive.today"):i-s<1728e5&&e.getDay()+1===t.getDay()?h["a"].t("home.student.trainLive.tomorrow"):h["a"].t("home.student.trainLive.future")}};m=n["__decorate"]([Object(r["a"])({components:{CardPayment:c["default"],RequestRadio:d["default"]}})],m);var v=m,p=v,g=s("2877"),y=s("6544"),f=s.n(y),b=s("4bd4"),_=Object(g["a"])(p,i,a,!1,null,null,null);e["default"]=_.exports;f()(_,{VForm:b["a"]})},"94ab":function(t,e,s){"use strict";s.d(e,"a",function(){return o}),s.d(e,"b",function(){return u});var i=s("2b0e"),a=s("d9bd");function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function r(t,e){return function(){return Object(a["b"])("The "+t+" component must be used inside a "+e)}}function o(t,e,s){var a=e&&s?{register:r(e,s),unregister:r(e,s)}:null;return i["default"].extend({name:"registrable-inject",inject:n({},t,{default:a})})}function u(t){return i["default"].extend({name:"registrable-provide",methods:{register:null,unregister:null},provide:function(){return n({},t,{register:this.register,unregister:this.unregister})}})}},a5eb:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",[s("input",{attrs:{type:"radio"},domProps:{checked:t.val===t.value},on:{change:t.onChange}}),s("span",[t._t("default")],2)])},a=[],n=s("9ab4"),r=s("60a3");let o=class extends r["c"]{onChange(){this.$emit("input",this.val)}};n["__decorate"]([Object(r["b"])()],o.prototype,"val",void 0),n["__decorate"]([Object(r["b"])()],o.prototype,"value",void 0),o=n["__decorate"]([Object(r["a"])({components:{}})],o);var u=o,l=u,d=s("2877"),c=Object(d["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=view-TrainLivevr2-vue.0079cecd.js.map