{"version":3,"sources":["webpack:///./node_modules/vuetify/lib/components/VProgressCircular/VProgressCircular.js","webpack:///./node_modules/vuetify/lib/util/mixins.js","webpack:///./src/components/NotificationMessage.vue?d22c","webpack:///./src/components/NotificationMessage.vue?8cb8","webpack:///./src/components/NotificationMessage.vue?1e65","webpack:///./src/components/NotificationMessage.vue","webpack:///./src/components/NotificationMessage.vue?3c76","webpack:///./src/components/CardPayment.vue?6efe","webpack:///./node_modules/vuetify/lib/mixins/colorable.js","webpack:///./src/managers/profile.ts","webpack:///./src/components/CardPayment.vue?a512","webpack:///./src/components/CardPayment.vue?dcd8","webpack:///./src/components/CardPayment.vue?02ed","webpack:///./src/components/CardPayment.vue"],"names":["__webpack_require__","_mixins_colorable__WEBPACK_IMPORTED_MODULE_1__","_util_mixins__WEBPACK_IMPORTED_MODULE_2__","__webpack_exports__","Object","extend","name","props","button","Boolean","indeterminate","rotate","type","Number","String","default","size","width","value","computed","calculatedSize","this","circumference","Math","PI","radius","classes","v-progress-circular--indeterminate","v-progress-circular--button","normalizedValue","parseFloat","strokeDashArray","round","strokeDashOffset","strokeWidth","viewBoxSize","styles","height","svgStyles","transform","methods","genCircle","h","offset","class","attrs","fill","cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset","genSvg","children","style","xmlns","viewBox","render","info","staticClass","$slots","svg","setTextColor","color","role","aria-valuemin","aria-valuemax","aria-valuenow","undefined","on","$listeners","d","mixins","vue__WEBPACK_IMPORTED_MODULE_0__","_len","arguments","length","args","Array","_key","_vm","_h","$createElement","_c","_self","appear","light","click","$event","close","domProps","innerHTML","_s","msg","staticRenderFns","NotificationMessagevue_type_script_lang_ts_NotificationMessage","vue_property_decorator","[object Object]","autoHide","hold","setTimeout","$emit","tslib_es6","components","NotificationMessagevue_type_script_lang_ts_","components_NotificationMessagevue_type_script_lang_ts_","component","componentNormalizer","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_stylus_loader_index_js_ref_10_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_10_oneOf_1_4_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NotificationMessage_vue_vue_type_style_index_0_id_5463e194_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_stylus_loader_index_js_ref_10_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_10_oneOf_1_4_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_NotificationMessage_vue_vue_type_style_index_0_id_5463e194_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_stylus_loader_index_js_ref_10_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_10_oneOf_1_4_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_CardPayment_vue_vue_type_style_index_0_id_65611b38_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_stylus_loader_index_js_ref_10_oneOf_1_3_node_modules_style_resources_loader_lib_index_js_ref_10_oneOf_1_4_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_CardPayment_vue_vue_type_style_index_0_id_65611b38_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_i","Symbol","iterator","next","done","push","err","isArray","TypeError","_extends","assign","target","source","key","prototype","hasOwnProperty","call","_defineProperty","obj","defineProperty","enumerable","configurable","writable","isCssColor","match","setBackgroundColor","data","background-color","border-color","caret-color","_color$toString$trim$","toString","trim","split","_color$toString$trim$2","colorName","colorModifier","Profile","vue_property_decorator__WEBPACK_IMPORTED_MODULE_1__","profile","isReady","isStudent","_managers_portal__WEBPACK_IMPORTED_MODULE_2__","isAuthenticated","update","$watch","client","student","me","trainer","response","then","Promise","resolve","reject","watch","tslib__WEBPACK_IMPORTED_MODULE_0__","errMessage","directives","rawName","processingPayment","expression","_v","$t","duration","sessionTickets","hasSavedCards","showCards","savedCards","activeCardIdx","Card","Brand","toUpperCase","_l","card","idx","chooseCard","isEmailVerified","ref","id","cancel","disabled","processPayment","CardPaymentvue_type_script_lang_ts_CardPayment","voucher","stripe","window","Stripe","elements","isCardEmpty","cardOptions","base","fontSize","fontWeight","::placeholder","invalid","hidePostalCode","portal","get","res","IsEmailAddressVerified","initPaymentForm","getProfileWhenReady","isPossibleToBook","possible","getSessionTickets","create","mount","$refs","checkCard","getSavedCards","e","empty","booking","canBook","IsPossible","payments","paymentMethodsGet","slice","cardIdx","trackPurchase","postBooking","payWithVoucher","payWithCard","Id","paymentMethodId","getPaymentIntent","payment","handleCardPayment","Secret","result","error","message","loopCount","waitForStripe","setInterval","clearInterval","post","secret","payment_method","redeemVoucher","success","catch","reason","usedVoucher","Date","now","NotificationMessage","CardPaymentvue_type_script_lang_ts_","components_CardPaymentvue_type_script_lang_ts_","installComponents_default","VProgressCircular"],"mappings":"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","file":"js/view-CardPayment-vue.4f10fc21.js","sourcesContent":["import '../../../src/stylus/components/_progress-circular.styl';\n// Mixins\nimport Colorable from '../../mixins/colorable';\nimport mixins from '../../util/mixins';\n/* @vue/component */\nexport default mixins(Colorable).extend({\n    name: 'v-progress-circular',\n    props: {\n        button: Boolean,\n        indeterminate: Boolean,\n        rotate: {\n            type: [Number, String],\n            default: 0\n        },\n        size: {\n            type: [Number, String],\n            default: 32\n        },\n        width: {\n            type: [Number, String],\n            default: 4\n        },\n        value: {\n            type: [Number, String],\n            default: 0\n        }\n    },\n    computed: {\n        calculatedSize: function calculatedSize() {\n            return Number(this.size) + (this.button ? 8 : 0);\n        },\n        circumference: function circumference() {\n            return 2 * Math.PI * this.radius;\n        },\n        classes: function classes() {\n            return {\n                'v-progress-circular--indeterminate': this.indeterminate,\n                'v-progress-circular--button': this.button\n            };\n        },\n        normalizedValue: function normalizedValue() {\n            if (this.value < 0) {\n                return 0;\n            }\n            if (this.value > 100) {\n                return 100;\n            }\n            return parseFloat(this.value);\n        },\n        radius: function radius() {\n            return 20;\n        },\n        strokeDashArray: function strokeDashArray() {\n            return Math.round(this.circumference * 1000) / 1000;\n        },\n        strokeDashOffset: function strokeDashOffset() {\n            return (100 - this.normalizedValue) / 100 * this.circumference + 'px';\n        },\n        strokeWidth: function strokeWidth() {\n            return Number(this.width) / +this.size * this.viewBoxSize * 2;\n        },\n        styles: function styles() {\n            return {\n                height: this.calculatedSize + 'px',\n                width: this.calculatedSize + 'px'\n            };\n        },\n        svgStyles: function svgStyles() {\n            return {\n                transform: 'rotate(' + Number(this.rotate) + 'deg)'\n            };\n        },\n        viewBoxSize: function viewBoxSize() {\n            return this.radius / (1 - Number(this.width) / +this.size);\n        }\n    },\n    methods: {\n        genCircle: function genCircle(h, name, offset) {\n            return h('circle', {\n                class: 'v-progress-circular__' + name,\n                attrs: {\n                    fill: 'transparent',\n                    cx: 2 * this.viewBoxSize,\n                    cy: 2 * this.viewBoxSize,\n                    r: this.radius,\n                    'stroke-width': this.strokeWidth,\n                    'stroke-dasharray': this.strokeDashArray,\n                    'stroke-dashoffset': offset\n                }\n            });\n        },\n        genSvg: function genSvg(h) {\n            var children = [this.indeterminate || this.genCircle(h, 'underlay', 0), this.genCircle(h, 'overlay', this.strokeDashOffset)];\n            return h('svg', {\n                style: this.svgStyles,\n                attrs: {\n                    xmlns: 'http://www.w3.org/2000/svg',\n                    viewBox: this.viewBoxSize + ' ' + this.viewBoxSize + ' ' + 2 * this.viewBoxSize + ' ' + 2 * this.viewBoxSize\n                }\n            }, children);\n        }\n    },\n    render: function render(h) {\n        var info = h('div', { staticClass: 'v-progress-circular__info' }, this.$slots.default);\n        var svg = this.genSvg(h);\n        return h('div', this.setTextColor(this.color, {\n            staticClass: 'v-progress-circular',\n            attrs: {\n                'role': 'progressbar',\n                'aria-valuemin': 0,\n                'aria-valuemax': 100,\n                'aria-valuenow': this.indeterminate ? undefined : this.normalizedValue\n            },\n            class: this.classes,\n            style: this.styles,\n            on: this.$listeners\n        }), [svg, info]);\n    }\n});\n//# sourceMappingURL=VProgressCircular.js.map","/* eslint-disable max-len, import/export, no-use-before-define */\nimport Vue from 'vue';\nexport default function mixins() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n    }\n\n    return Vue.extend({ mixins: args });\n}\n//# sourceMappingURL=mixins.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide-notification\",\"appear\":\"\"}},[_c('div',{staticClass:\"notification\",class:{light: _vm.light},on:{\"click\":function($event){return _vm.close()}}},[_c('div',{staticClass:\"msg\",domProps:{\"innerHTML\":_vm._s(_vm.msg)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport {Component, Prop, Vue} from \"vue-property-decorator\"\n\n@Component({ components: { } })\nexport default class NotificationMessage extends Vue {\n\t@Prop()\n\tprivate msg!: string\n\n\t@Prop({type: Boolean})\n\tprivate light!: boolean\n\n\t@Prop({type: Boolean})\n\tprivate hold!: boolean\n\n\tprivate autoHide: number = 5000\n\n\tprivate mounted(): void {\n\t\tif (!this.hold)\n\t\t\tsetTimeout(() => this.close(), this.autoHide)\n\t}\n\n\tprivate close(): void {\n\t\tthis.$emit(\"close\")\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--11-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationMessage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--11-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationMessage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NotificationMessage.vue?vue&type=template&id=5463e194&scoped=true&lang=pug&\"\nimport script from \"./NotificationMessage.vue?vue&type=script&lang=ts&\"\nexport * from \"./NotificationMessage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NotificationMessage.vue?vue&type=style&index=0&id=5463e194&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5463e194\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationMessage.vue?vue&type=style&index=0&id=5463e194&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NotificationMessage.vue?vue&type=style&index=0&id=5463e194&lang=stylus&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardPayment.vue?vue&type=style&index=0&id=65611b38&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardPayment.vue?vue&type=style&index=0&id=65611b38&lang=stylus&scoped=true&\"","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Vue from 'vue';\nfunction isCssColor(color) {\n    return !!color && !!color.match(/^(#|(rgb|hsl)a?\\()/);\n}\nexport default Vue.extend({\n    name: 'colorable',\n    props: {\n        color: String\n    },\n    methods: {\n        setBackgroundColor: function setBackgroundColor(color) {\n            var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n            if (isCssColor(color)) {\n                data.style = _extends({}, data.style, {\n                    'background-color': '' + color,\n                    'border-color': '' + color\n                });\n            } else if (color) {\n                data.class = _extends({}, data.class, _defineProperty({}, color, true));\n            }\n            return data;\n        },\n        setTextColor: function setTextColor(color) {\n            var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n            if (isCssColor(color)) {\n                data.style = _extends({}, data.style, {\n                    'color': '' + color,\n                    'caret-color': '' + color\n                });\n            } else if (color) {\n                var _color$toString$trim$ = color.toString().trim().split(' ', 2),\n                    _color$toString$trim$2 = _slicedToArray(_color$toString$trim$, 2),\n                    colorName = _color$toString$trim$2[0],\n                    colorModifier = _color$toString$trim$2[1];\n\n                data.class = _extends({}, data.class, _defineProperty({}, colorName + '--text', true));\n                if (colorModifier) {\n                    data.class['text--' + colorModifier] = true;\n                }\n            }\n            return data;\n        }\n    }\n});\n//# sourceMappingURL=colorable.js.map","import {Component, Vue} from \"vue-property-decorator\"\nimport {IStudentProfile, ITrainerProfile} from \"@chaosinsight/yogipeople-portalclient\"\nimport Portal from \"@/managers/portal\"\n\n@Component({ components: { } })\nclass Profile extends Vue {\n\tpublic profile: IStudentProfile | ITrainerProfile | null = null\n\n\tpublic get isReady(): boolean {\n\t\treturn this.profile !== null\n\t}\n\n\tpublic get isStudent(): boolean | null {\n\t\treturn Portal.isStudent\n\t}\n\n\tpublic created(): void {\n\t\tif (Portal.isAuthenticated)\n\t\t\tthis.update()\n\n\t\tthis.$watch( () => Portal.isAuthenticated, isAuthenticated => {\n\t\t\tif (isAuthenticated)\n\t\t\t\tthis.update()\n\t\t\telse\n\t\t\t\tthis.profile = null\n\t\t})\n\t}\n\n\tpublic update(): void {\n\t\t(Portal.isStudent\n\t\t\t? Portal.client.call.student.me()\n\t\t\t: Portal.client.call.trainer.me())\n\t\t\t.response\n\t\t\t.then(profile => {\n\t\t\t\tthis.profile = profile\n\t\t\t})\n\t}\n\n\tpublic getProfileWhenReady(): Promise<IStudentProfile | ITrainerProfile> {\n\t\tif (this.isReady)\n\t\t\treturn Promise.resolve(this.profile!)\n\n\t\treturn new Promise<IStudentProfile|ITrainerProfile>((resolve, reject) => {\n\t\t\tconst watch = this.$watch(() => this.profile, profile => {\n\t\t\t\twatch()\n\t\t\t\tresolve(profile!)\n\t\t\t})\n\t\t})\n\t}\n}\n\nexport default new Profile()\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.errMessage)?_c('NotificationMessage',{attrs:{\"msg\":_vm.errMessage,\"light\":\"\"},on:{\"close\":function($event){_vm.errMessage=null}}}):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.processingPayment),expression:\"!processingPayment\"}],staticClass:\"payment-wrapp\"},[_c('div',{staticClass:\"payment\"},[_c('div',{staticClass:\"session-data\"},[_c('div',{staticClass:\"total\"},[_vm._v(_vm._s(_vm.$t(\"message\")))]),_c('div',{staticClass:\"session-info\"},[_vm._v(_vm._s(((this.duration === 30 ? 25 : 55) + \"m Session\")))])]),(_vm.sessionTickets.length)?_c('div',{staticClass:\"session-ticket\"},[_c('div',{staticClass:\"text-xs-center\"},[_vm._v(\" \"+_vm._s(((_vm.sessionTickets.length) + \" session \" + (_vm.sessionTickets.length === 1 ? _vm.$t('cardPayment.ticket') : _vm.$t('cardPayment.tickets'))))+\" \"+_vm._s(_vm.$t(\"cardPayment.remaining\")))])]):_c('div',{staticClass:\"card-voucher\"},[(_vm.hasSavedCards && !_vm.showCards)?_c('div',{staticClass:\"saved-card\"},[_c('span',[_vm._v(_vm._s(((_vm.savedCards[_vm.activeCardIdx].Card.Brand.toUpperCase()) + \" \" + (_vm.savedCards[_vm.activeCardIdx].Card.Last4))))]),_c('a',{on:{\"click\":function($event){_vm.showCards=true}}},[_vm._v(_vm._s(_vm.$t('change')))])]):_vm._e(),(_vm.showCards)?_c('div',{staticClass:\"cards-list\"},[_c('ul',_vm._l((_vm.savedCards),function(card,idx){return _c('li',{key:idx},[_c('span',[_vm._v(_vm._s(((card.Card.Brand.toUpperCase()) + \" \" + (card.Card.Last4))))]),_c('a',{on:{\"click\":function($event){return _vm.chooseCard(idx)}}},[_vm._v(_vm._s(_vm.$t('choose')))])])}),0)]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasSavedCards && _vm.isEmailVerified),expression:\"!hasSavedCards && isEmailVerified\"}],ref:\"card\",attrs:{\"id\":\"card-element\"}})])]),_c('div',{staticClass:\"btn-group hidden-sm-and-down\"},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.cancel}},[_vm._v(_vm._s(_vm.$t('close')))]),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"disabled\":_vm.processingPayment || _vm.showCards},on:{\"click\":_vm.processPayment}},[_vm._v(_vm._s(_vm.sessionTickets.length ? \"Use Ticket\" : \"Pay\"))])]),_c('div',{staticClass:\"btn-group fixed hidden-md-and-up\"},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_vm._v(_vm._s(_vm.$t('close')))]),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"button\",\"disabled\":_vm.processingPayment || _vm.showCards},on:{\"click\":_vm.processPayment}},[_vm._v(_vm._s(_vm.sessionTickets.length ? \"Use Ticket\" : \"Pay\"))])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.processingPayment),expression:\"processingPayment\"}],staticClass:\"processing-payment\"},[_c('div',{staticClass:\"h3\"},[_vm._v(\"Please Wait\")]),_c('v-progress-circular',{staticClass:\"preloader\",attrs:{\"indeterminate\":\"\",\"size\":50}}),_c('span',[_vm._v(\"Processing payment, thank you for your patience.\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {Component, Prop, Vue} from \"vue-property-decorator\"\nimport Portal from \"@/managers/portal\"\nimport {IPayment, ISessionTicket , TrainingSessionDuration} from \"@chaosinsight/yogipeople-portalclient\"\nimport {IPaymentMethod} from \"@chaosinsight/yogipeople-portalclient/dist/extensions/payments\"\nimport Profile from \"@/managers/profile\"\nimport NotificationMessage from \"@/components/NotificationMessage.vue\"\nimport i18n from \"../i18n\"\n\n@Component({ components: { NotificationMessage } })\nexport default class CardPayment extends Vue {\n\t@Prop()\n\tprivate duration!: TrainingSessionDuration\n\n\tprivate card: any | null = null\n\tprivate voucher: string = \"\"\n\tprivate processingPayment: boolean | null = null\n\n\tprivate stripe = (window as any).Stripe(process.env.VUE_APP_STRIPE_SECRET_KEY)\n\tprivate elements = this.stripe.elements()\n\n\tprivate isCardEmpty: boolean | null = true\n\tprivate errMessage: string | null = null\n\n\tprivate savedCards: IPaymentMethod[] | null = null\n\tprivate activeCardIdx: number | null = null\n\n\tprivate showCards: boolean | null = null\n\n\tprivate sessionTickets: ISessionTicket[] = []\n\n\tprivate cardOptions = {\n\t\tstyle: {\n\t\t\tbase: {\n\t\t\t\t\"color\": \"white\",\n\t\t\t\t\"fontSize\": \"16px\",\n\t\t\t\t\"fontWeight\": \"300\",\n\t\t\t\t\"::placeholder\": {\n\t\t\t\t\tcolor: \"white\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tinvalid: {\n\t\t\t\tcolor: \"rgba(255, 255, 255, .7)\",\n\t\t\t}\n\t\t},\n\t\thidePostalCode: true\n\t}\n\tprivate created(): void {\n\t\tPortal.client.call.sessionTickets.get()\n\t\t\t.response.then(res => {\n\t\t\t\tthis.sessionTickets = res\n\t\t\t})\n\t}\n\n\tprivate isProfileReady(): boolean {\n\t\treturn Profile.isReady\n\t}\n\n\tprivate get isEmailVerified(): boolean | null {\n\t\treturn Profile.isReady\n\t\t\t? Profile.profile!.IsEmailAddressVerified\n\t\t\t: null\n\t}\n\n\tprivate get hasSavedCards(): boolean {\n\t\treturn this.savedCards !== null && this.savedCards!.length !== 0\n\t}\n\n\tprivate mounted(): void {\n\t\tthis.initPaymentForm()\n\n\t\tProfile.getProfileWhenReady()\n\t\t\t.then(profile => {\n\t\t\t})\n\t}\n\n\t/**\n\t * Initialize payment form with session ticket or Stripe + Voucher\n\t */\n\n\tprivate initPaymentForm(): void {\n\t\tthis.isPossibleToBook()\n\t\t\t.then(possible => {\n\t\t\t\tif (possible)\n\t\t\t\t\tthis.getSessionTickets()\n\t\t\t\t\t\t.then(res => this.sessionTickets = res)\n\t\t\t\telse {\n\t\t\t\t\tthis.card = this.elements.create(\"card\", this.cardOptions)\n\t\t\t\t\tthis.card.mount(this.$refs.card as HTMLElement)\n\t\t\t\t\tthis.card.on(\"change\", this.checkCard)\n\t\t\t\t\tthis.getSavedCards()\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tprivate checkCard(e: any): void {\n\t\tthis.isCardEmpty = e.empty\n\t}\n\n\t/**\n\t * Check if user has session tickets remaining\n\t */\n\n\tprivate isPossibleToBook(): Promise<boolean> {\n\t\treturn Portal.client.call.booking.canBook()\n\t\t\t.response.then(res => res.IsPossible)\n\t}\n\n\t/**\n\t * Get sessions tickets\n\t */\n\n\tprivate getSessionTickets(): Promise<ISessionTicket[]> {\n\t\treturn Portal.client.call.sessionTickets.get()\n\t\t\t.response.then(res => res)\n\t}\n\n\t/**\n\t * Get saved cards\n\t */\n\n\tprivate getSavedCards(): void {\n\t\tPortal.client.call.payments.paymentMethodsGet(\"card\")\n\t\t\t.response\n\t\t\t.then(res => {\n\t\t\t\tthis.savedCards = [].slice.call(res)\n\t\t\t\tthis.activeCardIdx = 0\n\t\t\t})\n\t}\n\n\t/**\n\t * Choose card\n\t */\n\n\tprivate chooseCard(cardIdx: number): void {\n\t\tthis.activeCardIdx = cardIdx\n\t\tthis.showCards = null\n\t}\n\n\t/**\n\t * Process payment\n\t */\n\n\tprivate processPayment(): void {\n\t\tif ((this.sessionTickets !== null && this.sessionTickets.length >= 0)\n\t\t\t\t|| (this.savedCards !== null && this.savedCards.length)\n\t\t\t\t|| !this.isCardEmpty\n\t\t\t\t|| !!this.voucher.trim().length) {\n\t\t\tthis.processingPayment = true\n\t\t\tthis.trackPurchase(true)\n\t\t}\n\n\t\tif (this.sessionTickets.length >= 0)\n\t\t\tthis.postBooking()\n\t\telse if (!!this.voucher.trim().length)\n\t\t\tthis.payWithVoucher()\n\t\telse if (this.savedCards !== null && this.savedCards!.length && this.activeCardIdx !== null)\n\t\t\tthis.payWithCard(this.savedCards[this.activeCardIdx].Id)\n\t\telse if (!this.isCardEmpty)\n\t\t\tthis.payWithCard()\n\t\telse\n\t\t\tthis.errMessage = \"Card and Voucher fields are empty.\"\n\t}\n\n\t/**\n\t * Pay with card\n\t */\n\n\tprivate payWithCard(paymentMethodId?: string | null): void {\n\t\tthis.getPaymentIntent()\n\t\t\t.then(payment => {\n\t\t\t\t(paymentMethodId\n\t\t\t\t\t? this.handleCardPayment(payment.Secret, paymentMethodId)\n\t\t\t\t\t: this.handleCardPayment(payment.Secret))\n\t\t\t\t.then((result: any) => {\n\t\t\t\t\tif (result.error) {\n\t\t\t\t\t\tthis.errMessage = result.error.message\n\t\t\t\t\t\tthis.processingPayment = null\n\t\t\t\t\t} else\n\t\t\t\t\t\tthis.isPossibleToBook()\n\t\t\t\t\t\t\t.then(possible => {\n\t\t\t\t\t\t\t\tif (possible)\n\t\t\t\t\t\t\t\t\tthis.postBooking()\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tlet loopCount: number | null = 0\n\t\t\t\t\t\t\t\t\tconst waitForStripe = setInterval(() => {\n\t\t\t\t\t\t\t\t\t\tif (loopCount !== null && loopCount < 5) {\n\t\t\t\t\t\t\t\t\t\t\tloopCount++\n\t\t\t\t\t\t\t\t\t\t\tthis.isPossibleToBook()\n\t\t\t\t\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloopCount = null\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.postBooking()\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tclearInterval(waitForStripe)\n\t\t\t\t\t\t\t\t\t\t\tif (loopCount === 5) {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.errMessage = \"Network connection failed, please try again.\"\n\t\t\t\t\t\t\t\t\t\t\t\tthis.processingPayment = null\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, 4000)  // check is possible to book every 4sec, max 5 times\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t}\n\n\t// get payment intent\n\tprivate getPaymentIntent(): Promise<IPayment> {\n\t\treturn Portal.client.call.payments.post(this.duration)\n\t\t\t.response.then(payment => payment)\n\t}\n\n\t// handle card payment\n\tprivate handleCardPayment(secret: string, paymentMethodId?: string | null): Promise<object> {\n\t\treturn paymentMethodId\n\t\t\t? this.stripe.handleCardPayment(secret, {payment_method: paymentMethodId})\n\t\t\t: this.stripe.handleCardPayment(secret, this.card)\n\t}\n\n\t/**\n\t * Pay with voucher\n\t */\n\n\tprivate payWithVoucher(): void {\n\t\tthis.redeemVoucher()\n\t\t\t.then(success => {\n\t\t\t\tif (success)\n\t\t\t\t\tthis.isPossibleToBook()\n\t\t\t\t\t\t.then(possible => {\n\t\t\t\t\t\t\tif (possible)\n\t\t\t\t\t\t\t\tthis.postBooking()\n\t\t\t\t\t\t})\n\t\t\t\telse\n\t\t\t\t\tthis.errMessage = \"Error: Failed to process request. Voucher is invalid\"\n\t\t\t})\n\t\t\t.catch(reason => {\n\t\t\t\tthis.errMessage = reason\n\t\t\t\tsetTimeout(() => this.processingPayment = null, 600)\n\t\t\t\tthrow reason\n\t\t\t})\n\t}\n\n\t/**\n\t * Redeem Voucher\n\t */\n\n\tprivate redeemVoucher(): Promise<boolean> {\n\t\treturn Portal.client.call.sessionTickets.redeemVoucher(this.voucher)\n\t\t\t.response\n\t\t\t.then(res => {\n\t\t\t\tif (res.length)\n\t\t\t\t\treturn true\n\t\t\t\treturn false\n\t\t\t})\n\t}\n\n\t/**\n\t * Post booking\n\t */\n\n\tprivate postBooking(): void {\n\t\tthis.trackPurchase(false)\n\n\t\tsetTimeout(() => {\n\t\t\tthis.$emit(\"postBooking\")\n\t\t\tthis.processingPayment = null\n\t\t}, 800) // better ux: loader min 800ms\n\t}\n\n\t/**\n\t * Cancel booking payment\n\t */\n\n\tprivate cancel(): void {\n\t\tthis.$emit(\"close\")\n\t}\n\n\t/**\n\t * Track purchase\n\t */\n\n\tprivate trackPurchase(usedVoucher: boolean): void {\n\t\tconst transactionId = Date.now().toString(10)\n\t\tconst price = this.duration === 30\n\t\t\t? \"10\"\n\t\t\t: \"15\"\n\t\tconst revenue = usedVoucher\n\t\t\t? \"0\"\n\t\t\t: price\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--11-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardPayment.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--11-2!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CardPayment.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CardPayment.vue?vue&type=template&id=65611b38&scoped=true&lang=pug&\"\nimport script from \"./CardPayment.vue?vue&type=script&lang=ts&\"\nexport * from \"./CardPayment.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CardPayment.vue?vue&type=style&index=0&id=65611b38&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65611b38\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/imac/dev/myhelloyoga/yogipeople-web/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VProgressCircular } from 'vuetify/lib'\ninstallComponents(component, {VProgressCircular})\n"],"sourceRoot":""}