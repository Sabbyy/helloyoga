(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-FeedbackTrainer-vue"],{"27b4":function(t,e,n){"use strict";var a=n("8889"),s=n.n(a);s.a},8889:function(t,e,n){},d8d7:function(t,e,n){"use strict";var a=n("9ab4"),s=n("60a3");const i={name:"unknown",os:"unknown"};-1!==navigator.appVersion.toLowerCase().indexOf("mac")?i.os="MacOS":/ipad|iphone|ipod/.test(navigator.platform.toLocaleLowerCase())?i.os="iOS":-1!==window.navigator.userAgent.indexOf("ServiceUI")?i.os="Windows 10":-1!==window.navigator.userAgent.indexOf("Windows NT 6.2")?i.os="Windows 8":-1!==window.navigator.userAgent.indexOf("Windows NT 6.1")?i.os="Windows 7":-1!==window.navigator.userAgent.indexOf("Windows NT 6.0")?i.os="Windows Vista":-1!==window.navigator.userAgent.indexOf("Windows NT 5.1")?i.os="Windows XP":-1!==window.navigator.userAgent.indexOf("Windows NT 5.0")?i.os="Windows 2000":-1!==navigator.appVersion.toLowerCase().indexOf("win")?i.os="Windows":navigator.userAgent.toLowerCase().indexOf("android")>-1?i.os="Android":-1!==navigator.appVersion.toLowerCase().indexOf("linux")?i.os="Linux":-1!==navigator.appVersion.toLowerCase().indexOf("x11")&&(i.os="UNIX"),-1!==navigator.userAgent.toLowerCase().indexOf("chrome")?i.name="Chrome":-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?i.name="FireFox":-1!==navigator.userAgent.toLowerCase().indexOf("safari")?i.name="Safari":navigator.appVersion.toLowerCase().indexOf("edge")>-1?i.name="Edge":-1!==navigator.userAgent.toLowerCase().indexOf("msie")?i.name="IE":navigator.userAgent.toLowerCase().indexOf("op")>-1&&(i.name="Opera");var o=i;let r=class extends s["c"]{constructor(){super(...arguments),this.url="https://helloyoga.zendesk.com/api/v2/requests.json",this.token="Bearer a5ec5001e4f565b24562c9152167b756654bd331d8d857a645607c8fd12c7054"}postTicketMediaErr(t,e){fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.token},body:JSON.stringify({request:{email:t.Email,requester:{name:`${t.FirstName} ${t.LastName}`},subject:"Media Error!",comment:{body:`\n\t\t\t\t\t\t\tProblem with accessing to microphone and/or camera!\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tSession started on: ${new Date(e.StartsOn).toLocaleString()}\n\t\t\t\t\t\t\tSession expires: ${new Date(e.ExpiresOn).toLocaleString()}\n\t\t\t\t\t\t\tSession ID: ${e.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tName: ${t.FirstName} ${t.LastName}\n\t\t\t\t\t\t\tEmail: ${t.Email}\n\t\t\t\t\t\t\tID: ${t.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tParticipant name: ${e.Participant.FirstName} ${e.Participant.LastName}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tBrowser: ${o.name}\n\t\t\t\t\t\t\tOS: ${o.os}\n\t\t\t\t\t\t\tPlatform: ${navigator.platform}\n\t\t\t\t\t\t\tUserAgent: ${navigator.userAgent}\n\t\t\t\t\t\t\t`}}})})}postTicketStart(t,e){fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.token},body:JSON.stringify({request:{email:t.Email,requester:{name:`${t.FirstName} ${t.LastName}`},subject:"Session Started!",comment:{body:`\n\t\t\t\t\t\t\tSession started on: ${new Date(e.StartsOn).toLocaleString()}\n\t\t\t\t\t\t\tSession expires: ${new Date(e.ExpiresOn).toLocaleString()}\n\t\t\t\t\t\t\tSession ID: ${e.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tName: ${t.FirstName} ${t.LastName}\n\t\t\t\t\t\t\tEmail: ${t.Email}\n\t\t\t\t\t\t\tID: ${t.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tParticipant name: ${e.Participant.FirstName} ${e.Participant.LastName}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tBrowser: ${o.name}\n\t\t\t\t\t\t\tOS: ${o.os}\n\t\t\t\t\t\t\tPlatform: ${navigator.platform}\n\t\t\t\t\t\t\tUserAgent: ${navigator.userAgent}\n\t\t\t\t\t\t\t`}}})})}createTicket(t,e,n,a,s,i,o,r,c){fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.token},body:this.getBody(t,e,n,a,s,i,o,r,c)})}getBody(t,e,n,a,s,i,r,c,d){const l=d?"Student":"Trainer",m=d?"Trainer":"Student";return JSON.stringify({request:{email:n.Email,requester:{name:`${n.FirstName} ${n.LastName}`},subject:`${this.getSubject(t,s)}`,comment:{body:`\n\t\t\t\t\t\t${l} name: ${n.FirstName} ${n.LastName}\n\t\t\t\t\t\t${l} email: ${n.Email}\n\t\t\t\t\t\t${l} ID: ${n.Id}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t${m} name: ${a.Participant.FirstName} ${a.Participant.LastName}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\tSession ID: ${a.Id}\n\t\t\t\t\t\tSession start: ${new Date(a.StartsOn).toLocaleString()}\n\t\t\t\t\t\tSession expires: ${new Date(a.ExpiresOn).toLocaleString()}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\tSession success: YES\n\t\t\t\t\t\t${this.isEndedEarlier(t,s)}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t${this.getFeedback(t,i,r,e)}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t${this.getFeedbackComment(c)}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\tBrowser: ${o.name}\n\t\t\t\t\t\tOS: ${o.os}\n\t\t\t\t\t\tPlatform: ${navigator.platform}\n\t\t\t\t\t\tUserAgent: ${navigator.userAgent}\n\t\t\t\t\t`}}})}getSubject(t,e){return"completeOnLogin"===t?"Session completed on login":"cancelOnLogin"===t?"Session completed on login (ended earlier)":e?"Session complete (ended earlier)":"Session complete"}isEndedEarlier(t,e){return"completeOnLogin"===t?"Session fully completed (rated on next login)":"cancelOnLogin"===t?"Session completed earlier on next login":e?`Session ended earlier on: ${e}`:"Session fully completed"}getFeedback(t,e,n,a){return"complete"===t||"completeOnLogin"===t?null===n?e?`Rating: ${e} ⭐️`:"Rating not submited":`Allow another session: ${n?"NO":"YES"}`:a?`Reason selected: ${a}`:"Reason not selected"}getFeedbackComment(t){return t?`Feedback message: ${t}`:"Feedback message: No message"}};r=a["__decorate"]([Object(s["a"])({components:{}})],r);e["a"]=new r},f2c9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"feedback"},[a("div",{staticClass:"button-group"},["completeOnLogin"!==t.feedbackType&&"cancelOnLogin"!==t.feedbackType?a("button",{staticClass:"yp__close-circle",on:{click:function(e){return t.postZendesk()}}}):t._e(),"complete"===t.feedbackType||"completeOnLogin"===t.feedbackType?a("button",{staticClass:"yp__arrow-right-circle submit ml-auto",on:{click:t.submitFeedback}}):t._e()]),"cancel"===t.feedbackType||"cancelOnLogin"===t.feedbackType?a("div",{staticClass:"feedback-cancel text-xs-center"},[a("div",{staticClass:"h2"},[t._v(t._s(t.$t("feedbackTrainer.text1"))),a("br"),t._v(" "+t._s(t.$t("feedbackTrainer.text2")))]),a("ul",{staticClass:"cancel-reasons"},t._l(t.cancelReasons,function(e,n){return a("li",{key:n},[a("div",{staticClass:"hr"}),a("a",{on:{click:function(n){return t.submitFeedback(e)}}},[a("div",{staticClass:"h4"},[t._v(t._s(e))])])])}),0)]):a("div",{staticClass:"feedback-complete text-xs-center"},[a("img",{staticClass:"avatar",attrs:{src:t.sessionData.Participant.ProfilePictureUrl?t.sessionData.Participant.ProfilePictureUrl:""+n("fad5")}}),a("div",{staticClass:"h2"},[t._v(t._s(t.$t("feedbackTrainer.text3"))+" "+t._s(""+t.sessionData.Participant.FirstName)+" "+t._s(t.$t("feedbackTrainer.text4")))]),a("label",{staticClass:"yp-switch",class:{block:t.blockStudent}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.blockStudent,expression:"blockStudent"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.blockStudent)?t._i(t.blockStudent,null)>-1:t.blockStudent},on:{change:function(e){var n=t.blockStudent,a=e.target,s=!!a.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);a.checked?o<0&&(t.blockStudent=n.concat([i])):o>-1&&(t.blockStudent=n.slice(0,o).concat(n.slice(o+1)))}else t.blockStudent=s}}}),a("span",[t._v("Yes")]),a("span",[t._v("No")])]),a("label",{staticClass:"feedback-field"},[t._v("Send a message to HelloYoga support."),a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{type:"text",id:"feedback",placeholder:t.$t("feedbackTrainer.text5")},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})])])])},s=[],i=n("9ab4"),o=n("60a3"),r=n("e0cf"),c=n("b99e"),d=n("d8d7"),l=n("88c3");let m=class extends o["c"]{constructor(){super(...arguments),this.blockStudent=!1,this.comment=null,this.cancelTime=null,this.storage=window.localStorage,this.cancelReasons=[l["a"].t("feedbackTrainer.reason1"),l["a"].t("feedbackTrainer.reason2"),l["a"].t("feedbackTrainer.reason3"),l["a"].t("feedbackTrainer.reason4"),l["a"].t("feedbackTrainer.reason5")]}created(){this.cancelTime="cancel"===this.feedbackType?(new Date).toLocaleString():null,null!==this.storage.getItem("zendesk")&&this.storage.removeItem("zendesk")}submitFeedback(t){-1!==[r["b"].Expired,r["b"].OtherUserCompleted].indexOf(this.sessionData.State)?this.completeOnLogin():this.sessionData.State===r["b"].OtherUserCancelled&&this.cancelOnLogin(),this.postZendesk(t)}completeOnLogin(){c["a"].client.call.trainingSession.trainerComplete(this.sessionData.Id).response.then()}cancelOnLogin(){c["a"].client.call.trainingSession.cancel(this.sessionData.Id).response.then()}postZendesk(t=null){d["a"].createTicket(this.feedbackType,t,this.profile,this.sessionData,this.cancelTime,null,this.blockStudent,this.comment),this.$emit("close")}};i["__decorate"]([Object(o["b"])()],m.prototype,"feedbackType",void 0),i["__decorate"]([Object(o["b"])()],m.prototype,"profile",void 0),i["__decorate"]([Object(o["b"])()],m.prototype,"sessionData",void 0),m=i["__decorate"]([Object(o["a"])({components:{}})],m);var p=m,u=p,g=(n("27b4"),n("2877")),b=Object(g["a"])(u,a,s,!1,null,"10b1b55a",null);e["default"]=b.exports},fad5:function(t,e,n){t.exports=n.p+"img/avatar-dummy.10e80969.jpg"}}]);
//# sourceMappingURL=view-FeedbackTrainer-vue.8e375864.js.map