(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-TrainerAvailability-vue","view-NotificationMessage-vue","view-TrainerHours-vue"],{"3a74":function(t,e,a){"use strict";var i=a("d894"),s=a.n(i);s.a},"45a1":function(t,e,a){"use strict";var i=a("72a4"),s=a.n(i);s.a},"59ef":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-notification",appear:""}},[a("div",{staticClass:"notification",class:{light:t.light},on:{click:function(e){return t.close()}}},[a("div",{staticClass:"msg",domProps:{innerHTML:t._s(t.msg)}})])])},s=[],o=a("9ab4"),l=a("60a3");let n=class extends l["c"]{constructor(){super(...arguments),this.autoHide=5e3}mounted(){this.hold||setTimeout(()=>this.close(),this.autoHide)}close(){this.$emit("close")}};o["__decorate"]([Object(l["b"])()],n.prototype,"msg",void 0),o["__decorate"]([Object(l["b"])({type:Boolean})],n.prototype,"light",void 0),o["__decorate"]([Object(l["b"])({type:Boolean})],n.prototype,"hold",void 0),n=o["__decorate"]([Object(l["a"])({components:{}})],n);var r=n,c=r,u=(a("5bc5"),a("2877")),m=Object(u["a"])(c,i,s,!1,null,"5463e194",null);e["default"]=m.exports},"5bc5":function(t,e,a){"use strict";var i=a("deeb"),s=a.n(i);s.a},"72a4":function(t,e,a){},a95c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-slot",appear:""}},[a("div",{staticClass:"availability-select",on:{click:function(e){return e.target!==e.currentTarget?null:t.$emit("close")}}},[t.notificationMsg?a("NotificationMessage",{attrs:{light:"",msg:t.notificationMsg},on:{close:function(e){t.notificationMsg=null}}}):t._e(),a("form",{on:{submit:function(e){return e.preventDefault(),t.setTimeSlot(e)}}},[t.slotsExist()?t._e():a("div",{staticClass:"h3"},[t._v(t._s(t.$t("trainerHours.text1")))]),a("div",{staticClass:"h3 mb-4"},[t._v(t._s(t.day))]),t._l(t.countTimeSlots,function(e){return a("div",{staticClass:"time-slot",class:{last:e===t.countTimeSlots}},[a("div",{staticClass:"clock"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.timeSlots[e-1].fromHour,expression:"timeSlots[n-1].fromHour"}],staticClass:"hours",attrs:{disabled:t.slotsExist()},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.timeSlots[e-1],"fromHour",a.target.multiple?i:i[0])}}},t._l(12,function(e){return a("option",{key:e+"am",domProps:{value:""+e}},[t._v(t._s(e))])}),0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.timeSlots[e-1].fromMinute,expression:"timeSlots[n-1].fromMinute"}],attrs:{disabled:t.slotsExist()},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.timeSlots[e-1],"fromMinute",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"0"}},[t._v("00")]),a("option",{attrs:{value:"30"}},[t._v("30")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.timeSlots[e-1].fromAmPm,expression:"timeSlots[n-1].fromAmPm"}],attrs:{disabled:t.slotsExist()},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.timeSlots[e-1],"fromAmPm",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"am"}},[t._v("am")]),a("option",{attrs:{value:"pm"}},[t._v("pm")])])]),a("div",{staticClass:"divider"},[t._v("To")]),a("div",{staticClass:"clock"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.timeSlots[e-1].toHour,expression:"timeSlots[n-1].toHour"}],staticClass:"hours",attrs:{disabled:t.slotsExist()},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.timeSlots[e-1],"toHour",a.target.multiple?i:i[0])}}},t._l(12,function(e){return a("option",{key:e+"am",domProps:{value:""+e}},[t._v(t._s(e))])}),0),a("select",{directives:[{name:"model",rawName:"v-model",value:t.timeSlots[e-1].toMinute,expression:"timeSlots[n-1].toMinute"}],attrs:{disabled:t.slotsExist()},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.timeSlots[e-1],"toMinute",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"0"}},[t._v("00")]),a("option",{attrs:{value:"30"}},[t._v("30")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.timeSlots[e-1].toAmPm,expression:"timeSlots[n-1].toAmPm"}],attrs:{disabled:t.slotsExist()},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.timeSlots[e-1],"toAmPm",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"am"}},[t._v("am")]),a("option",{attrs:{value:"pm"}},[t._v("pm")])])])])}),!t.slotsExist()&&t.countTimeSlots<t.maxTimeSlots?a("button",{staticClass:"add-slot",attrs:{type:"button"},on:{click:t.addTimeSlot}},[t._v(t._s(t.$t("trainerHours.text2")))]):t._e(),a("div",{staticClass:"actions"},[a("button",{attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("trainerHours.text5")))]),a("button",{class:{disabled:0!==this.availability.length},attrs:{type:"submit"}},[t._v(t._s(t.$t("trainerHours.text3")))])])],2),t.slotsExist()?a("button",{staticClass:"unavailable",on:{"~click":function(e){return t.becomeUnavailable(e)}}},[t._v(t._s(t.$t("trainerHours.text6")))]):t._e()],1)])},s=[],o=a("9ab4"),l=a("60a3"),n=a("b99e"),r=a("59ef"),c=a("88c3");let u=class extends l["c"]{constructor(){super(...arguments),this.notificationMsg=null,this.countTimeSlots=1,this.maxTimeSlots=3,this.timeSlots=[]}created(){if(this.availability.length)this.countTimeSlots=this.availability.length,this.availability.forEach((t,e)=>{const a={},i=new Date(t.TimeSlot.Start).getHours(),s=new Date(t.TimeSlot.End).getHours();a.fromHour=this.format12hour(i),a.fromMinute=new Date(t.TimeSlot.Start).getMinutes(),a.fromAmPm=this.amPm(i),a.toHour=this.format12hour(s),a.toMinute=new Date(t.TimeSlot.End).getMinutes(),a.toAmPm=this.amPm(s),this.timeSlots.push(a)});else for(let t=0;t<this.countTimeSlots;t++)this.timeSlots.push({})}setTimeSlot(){const t=new Date(this.date),e=new Date(this.date);this.timeSlots.forEach((a,i)=>{if(a.fromHour){const i=this.format24hour(a.fromHour,a.fromAmPm),s=this.format24hour(a.toHour,a.toAmPm,!0);t.setHours(i,0,0,0),t.setMinutes(a.fromMinute,0,0),e.setHours(s,0,0,0),e.setMinutes(a.toMinute,0,0),this.postAvailability(t,e)}})}postAvailability(t,e){n["a"].client.call.booking.availabilityPost(t,e).response.then(()=>this.$emit("close")).catch(()=>this.notificationMsg=c["a"].t("trainerHours.text4"))}becomeUnavailable(){this.availability.forEach(t=>n["a"].client.call.booking.availabilityDelete(t.Id).response.then(()=>this.$emit("close")))}addTimeSlot(){this.countTimeSlots++,this.timeSlots.push({})}slotsExist(){return!!this.availability.length}format24hour(t,e,a=!1){const i=a?24:0;return"pm"===e?12===Number(t)?12:Number(t)+12:12===Number(t)?i:t}format12hour(t){return 0===Number(t)?12:t>12?t-12:t}amPm(t){return t>=12?"pm":"am"}};o["__decorate"]([Object(l["b"])()],u.prototype,"date",void 0),o["__decorate"]([Object(l["b"])()],u.prototype,"day",void 0),o["__decorate"]([Object(l["b"])()],u.prototype,"availability",void 0),u=o["__decorate"]([Object(l["a"])({components:{NotificationMessage:r["default"]}})],u);var m=u,v=m,d=(a("45a1"),a("2877")),h=Object(d["a"])(v,i,s,!1,null,"ee9f0f12",null);e["default"]=h.exports},d894:function(t,e,a){},deeb:function(t,e,a){},f05b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trainer-availability"},[a("div",{staticClass:"h3"},[t._v(t._s(t.$t("trainerAvailability.text1")))]),a("ul",{staticClass:"days"},t._l(t.daysInWeek,function(e,i){return a("li",{key:i},[a("button",{staticClass:"day",class:{booked:t.checkAvailability(i)},on:{click:function(e){return t.setAvailability(i)}}},[t._v(t._s(t.dayLabel(i))),a("span",[t._v(t._s(t.checkAvailability(i)?t.checkAvailability(i):"Unavailable"))])])])}),0),a("button",{staticClass:"close yp__close-circle ico-fill",on:{click:function(e){return t.$emit("close")}}}),t.targetDate?a("TrainerHours",{attrs:{date:t.targetDate,day:t.targetDay,availability:t.targetAvailability},on:{close:t.closeHours}}):t._e()],1)},s=[],o=a("9ab4"),l=a("60a3"),n=a("b99e"),r=a("a95c"),c=a("88c3");let u=class extends l["c"]{constructor(){super(...arguments),this.targetDate=null,this.targetDay=null,this.targetAvailability=null,this.availabilities=null,this.daysInWeek=[c["a"].t("sunday").toString(),c["a"].t("monday").toString(),c["a"].t("tuesday").toString(),c["a"].t("wednesday").toString(),c["a"].t("thursday").toString(),c["a"].t("friday").toString(),c["a"].t("saturday").toString()]}mounted(){this.getAvailabilities()}closeHours(){this.targetDate=null,this.getAvailabilities()}getAvailabilities(){n["a"].client.call.booking.availabilityGet().response.then(t=>{this.availabilities=t,t.length?this.$emit("isAvailable",!0):this.$emit("isAvailable",!1)})}checkAvailability(t){const e=new Date;let a;e.setDate(e.getDate()+t);let i="";if(this.availabilities)return a=this.availabilities.filter(t=>new Date(t.TimeSlot.Start).getDate()===e.getDate()),a?(a.forEach(t=>{const e=new Date(t.TimeSlot.Start).getHours(),a=new Date(t.TimeSlot.Start).getMinutes().toString(),s=new Date(t.TimeSlot.End).getHours(),o=new Date(t.TimeSlot.End).getMinutes().toString();i+=`${this.amPm(e,a)}-${this.amPm(s,o)}; `}),i.slice(0,-2)):null}setAvailability(t){this.targetDay=this.dayLabel(t),this.targetDate=new Date,this.targetDate.setDate(this.targetDate.getDate()+t);const e=this.targetDate;this.availabilities&&(this.targetAvailability=this.availabilities.filter(t=>new Date(t.TimeSlot.Start).getDate()===e.getDate()))}dayLabel(t){let e="";const a=new Date;switch(a.setDate(a.getDate()+t),t){case 0:e="Today";break;case 1:e="Tomorrow";break;default:e=this.daysInWeek[a.getDay()]}return`${e} ${a.getMonth()+1}/${a.getDate()}`}amPm(t,e){return e="0"===e?"":`:${e}`,t>12?`${t%12}${e}pm`:t<12?`${t}${e}am`:"12pm"}};u=o["__decorate"]([Object(l["a"])({components:{TrainerHours:r["default"]}})],u);var m=u,v=m,d=(a("3a74"),a("2877")),h=Object(d["a"])(v,i,s,!1,null,"56a3cd00",null);e["default"]=h.exports}}]);
//# sourceMappingURL=view-TrainerAvailability-vue.b1e78672.js.map