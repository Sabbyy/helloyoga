(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-FeedbackStudent-vue"],{"16ac":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"feedback"},["cancel"===t.feedbackType||"cancelOnLogin"===t.feedbackType?a("div",{staticClass:"feedback-cancel text-xs-center"},[a("div",{staticClass:"h4"},[t._v(t._s(t.$t("feedbackStudent.text1"))),a("br"),t._v(" "+t._s(t.$t("feedbackStudent.text2")))]),a("ul",{staticClass:"cancel-reasons"},t._l(t.cancelReasons,function(e,n){return a("li",{key:n},[a("div",{staticClass:"hr"}),a("a",{on:{click:function(n){return t.submitFeedback(e)}}},[a("div",{staticClass:"h4"},[t._v(t._s(e))])])])}),0)]):t._e(),"complete"===t.feedbackType||"completeOnLogin"===t.feedbackType?a("div",{staticClass:"feedback-complete text-xs-center"},[a("img",{staticClass:"avatar",attrs:{src:t.sessionData.Participant.ProfilePictureUrl?t.sessionData.Participant.ProfilePictureUrl:""+n("fad5")}}),t.title&&"updateRating"!==t.feedbackType?a("div",{staticClass:"h4"},[t._v(t._s(t.title))]):t._e(),a("div",{staticClass:"h4"},[t._v(t._s(t.$t("feedbackStudent.text3"))+" "+t._s(t.sessionData.Participant.FirstName+" "+t.sessionData.Participant.LastName))]),a("div",{staticClass:"rating"},t._l(t.maxRating,function(e){return a("span",{key:e,staticClass:"star yp__star",class:{selected:t.rating===t.maxRating-e+1},on:{click:function(n){t.rating=t.maxRating-e+1}}})}),0),a("label",{staticClass:"feedback-field"},[t._v(t._s(t.$t("feedbackStudent.text4"))),a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],attrs:{type:"text",id:"feedback",placeholder:t.$t("feedbackStudent.text5")},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),a("div",{staticClass:"btn-group hidden-sm-and-downa"},["completeOnLogin"!==t.feedbackType&&"cancelOnLogin"!==t.feedbackType?a("button",{staticClass:"close",on:{click:function(e){return t.postZendesk()}}},[t._v("Close")]):t._e(),a("button",{staticClass:"submit",on:{click:function(e){return t.submitFeedback()}}},[t._v("Submit")])]),a("div",{staticClass:"btn-group fixed hidden-md-and-up"},["completeOnLogin"!==t.feedbackType&&"cancelOnLogin"!==t.feedbackType?a("button",{staticClass:"close",on:{click:function(e){return t.postZendesk()}}},[t._v("Close")]):t._e(),a("button",{staticClass:"submit",on:{click:function(e){return t.submitFeedback()}}},[t._v("Submit")])])]):t._e()])},s=[],i=n("9ab4"),o=n("60a3"),r=n("e0cf"),c=n("b99e"),d=n("d8d7"),l=n("88c3");let m=class extends o["c"]{constructor(){super(...arguments),this.maxRating=5,this.rating=null,this.title=null,this.comment=null,this.cancelTime=null,this.storage=window.localStorage,this.cancelReasons=[l["a"].t("feedbackStudent.reason1"),l["a"].t("feedbackStudent.reason2"),l["a"].t("feedbackStudent.reason3"),l["a"].t("feedbackStudent.reason4"),l["a"].t("feedbackStudent.reason5")]}created(){this.cancelTime="cancel"===this.feedbackType?(new Date).toLocaleString():null,this.title=-1!==[r["b"].Expired,r["b"].OtherUserCancelled,r["b"].OtherUserCompleted].indexOf(this.sessionData.State)?l["a"].t("feedbackStudent.text6"):l["a"].t("feedbackStudent.text7"),null!==this.storage.getItem("zendesk")&&this.storage.removeItem("zendesk")}submitFeedback(t){-1!==[r["b"].Expired,r["b"].OtherUserCompleted].indexOf(this.sessionData.State)?this.completeOnLogin():this.sessionData.State===r["b"].OtherUserCancelled?this.cancelOnLogin():t?this.postZendesk(t):this.rate()}completeOnLogin(){c["a"].client.call.trainingSession.studentComplete(this.sessionData.Id,this.rating).response.then(()=>{this.postZendesk()})}cancelOnLogin(){c["a"].client.call.trainingSession.cancel(this.sessionData.Id).response.then(()=>{this.postZendesk()})}rate(){null!==this.rating&&c["a"].client.call.trainingSession.studentRate(this.sessionData.Id,this.rating).response.then(()=>{"updateRating"===this.feedbackType&&this.$emit("reloadHistory"),this.postZendesk()})}postZendesk(t=null){window.localStorage.setItem("closedFeedback","closed"),t&&"updateRating"!==this.feedbackType&&d["a"].createTicket(this.feedbackType,t,this.profile,this.sessionData,this.cancelTime,this.rating,null,this.comment,!0),this.$emit("close")}};i["__decorate"]([Object(o["b"])()],m.prototype,"feedbackType",void 0),i["__decorate"]([Object(o["b"])()],m.prototype,"profile",void 0),i["__decorate"]([Object(o["b"])()],m.prototype,"sessionData",void 0),m=i["__decorate"]([Object(o["a"])({components:{}})],m);var u=m,p=u,g=(n("324d"),n("2877")),f=Object(g["a"])(p,a,s,!1,null,"62a5e402",null);e["default"]=f.exports},"324d":function(t,e,n){"use strict";var a=n("9912"),s=n.n(a);s.a},9912:function(t,e,n){},d8d7:function(t,e,n){"use strict";var a=n("9ab4"),s=n("60a3");const i={name:"unknown",os:"unknown"};-1!==navigator.appVersion.toLowerCase().indexOf("mac")?i.os="MacOS":/ipad|iphone|ipod/.test(navigator.platform.toLocaleLowerCase())?i.os="iOS":-1!==window.navigator.userAgent.indexOf("ServiceUI")?i.os="Windows 10":-1!==window.navigator.userAgent.indexOf("Windows NT 6.2")?i.os="Windows 8":-1!==window.navigator.userAgent.indexOf("Windows NT 6.1")?i.os="Windows 7":-1!==window.navigator.userAgent.indexOf("Windows NT 6.0")?i.os="Windows Vista":-1!==window.navigator.userAgent.indexOf("Windows NT 5.1")?i.os="Windows XP":-1!==window.navigator.userAgent.indexOf("Windows NT 5.0")?i.os="Windows 2000":-1!==navigator.appVersion.toLowerCase().indexOf("win")?i.os="Windows":navigator.userAgent.toLowerCase().indexOf("android")>-1?i.os="Android":-1!==navigator.appVersion.toLowerCase().indexOf("linux")?i.os="Linux":-1!==navigator.appVersion.toLowerCase().indexOf("x11")&&(i.os="UNIX"),-1!==navigator.userAgent.toLowerCase().indexOf("chrome")?i.name="Chrome":-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?i.name="FireFox":-1!==navigator.userAgent.toLowerCase().indexOf("safari")?i.name="Safari":navigator.appVersion.toLowerCase().indexOf("edge")>-1?i.name="Edge":-1!==navigator.userAgent.toLowerCase().indexOf("msie")?i.name="IE":navigator.userAgent.toLowerCase().indexOf("op")>-1&&(i.name="Opera");var o=i;let r=class extends s["c"]{constructor(){super(...arguments),this.url="https://helloyoga.zendesk.com/api/v2/requests.json",this.token="Bearer a5ec5001e4f565b24562c9152167b756654bd331d8d857a645607c8fd12c7054"}postTicketMediaErr(t,e){fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.token},body:JSON.stringify({request:{email:t.Email,requester:{name:`${t.FirstName} ${t.LastName}`},subject:"Media Error!",comment:{body:`\n\t\t\t\t\t\t\tProblem with accessing to microphone and/or camera!\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tSession started on: ${new Date(e.StartsOn).toLocaleString()}\n\t\t\t\t\t\t\tSession expires: ${new Date(e.ExpiresOn).toLocaleString()}\n\t\t\t\t\t\t\tSession ID: ${e.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tName: ${t.FirstName} ${t.LastName}\n\t\t\t\t\t\t\tEmail: ${t.Email}\n\t\t\t\t\t\t\tID: ${t.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tParticipant name: ${e.Participant.FirstName} ${e.Participant.LastName}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tBrowser: ${o.name}\n\t\t\t\t\t\t\tOS: ${o.os}\n\t\t\t\t\t\t\tPlatform: ${navigator.platform}\n\t\t\t\t\t\t\tUserAgent: ${navigator.userAgent}\n\t\t\t\t\t\t\t`}}})})}postTicketStart(t,e){fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.token},body:JSON.stringify({request:{email:t.Email,requester:{name:`${t.FirstName} ${t.LastName}`},subject:"Session Started!",comment:{body:`\n\t\t\t\t\t\t\tSession started on: ${new Date(e.StartsOn).toLocaleString()}\n\t\t\t\t\t\t\tSession expires: ${new Date(e.ExpiresOn).toLocaleString()}\n\t\t\t\t\t\t\tSession ID: ${e.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tName: ${t.FirstName} ${t.LastName}\n\t\t\t\t\t\t\tEmail: ${t.Email}\n\t\t\t\t\t\t\tID: ${t.Id}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tParticipant name: ${e.Participant.FirstName} ${e.Participant.LastName}\n\t\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t\tBrowser: ${o.name}\n\t\t\t\t\t\t\tOS: ${o.os}\n\t\t\t\t\t\t\tPlatform: ${navigator.platform}\n\t\t\t\t\t\t\tUserAgent: ${navigator.userAgent}\n\t\t\t\t\t\t\t`}}})})}createTicket(t,e,n,a,s,i,o,r,c){fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.token},body:this.getBody(t,e,n,a,s,i,o,r,c)})}getBody(t,e,n,a,s,i,r,c,d){const l=d?"Student":"Trainer",m=d?"Trainer":"Student";return JSON.stringify({request:{email:n.Email,requester:{name:`${n.FirstName} ${n.LastName}`},subject:`${this.getSubject(t,s)}`,comment:{body:`\n\t\t\t\t\t\t${l} name: ${n.FirstName} ${n.LastName}\n\t\t\t\t\t\t${l} email: ${n.Email}\n\t\t\t\t\t\t${l} ID: ${n.Id}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t${m} name: ${a.Participant.FirstName} ${a.Participant.LastName}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\tSession ID: ${a.Id}\n\t\t\t\t\t\tSession start: ${new Date(a.StartsOn).toLocaleString()}\n\t\t\t\t\t\tSession expires: ${new Date(a.ExpiresOn).toLocaleString()}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\tSession success: YES\n\t\t\t\t\t\t${this.isEndedEarlier(t,s)}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t${this.getFeedback(t,i,r,e)}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\t${this.getFeedbackComment(c)}\n\t\t\t\t\t\t------------------------------------------------------\n\t\t\t\t\t\tBrowser: ${o.name}\n\t\t\t\t\t\tOS: ${o.os}\n\t\t\t\t\t\tPlatform: ${navigator.platform}\n\t\t\t\t\t\tUserAgent: ${navigator.userAgent}\n\t\t\t\t\t`}}})}getSubject(t,e){return"completeOnLogin"===t?"Session completed on login":"cancelOnLogin"===t?"Session completed on login (ended earlier)":e?"Session complete (ended earlier)":"Session complete"}isEndedEarlier(t,e){return"completeOnLogin"===t?"Session fully completed (rated on next login)":"cancelOnLogin"===t?"Session completed earlier on next login":e?`Session ended earlier on: ${e}`:"Session fully completed"}getFeedback(t,e,n,a){return"complete"===t||"completeOnLogin"===t?null===n?e?`Rating: ${e} ⭐️`:"Rating not submited":`Allow another session: ${n?"NO":"YES"}`:a?`Reason selected: ${a}`:"Reason not selected"}getFeedbackComment(t){return t?`Feedback message: ${t}`:"Feedback message: No message"}};r=a["__decorate"]([Object(s["a"])({components:{}})],r);e["a"]=new r},fad5:function(t,e,n){t.exports=n.p+"img/avatar-dummy.10e80969.jpg"}}]);
//# sourceMappingURL=view-FeedbackStudent-vue.02853fd8.js.map