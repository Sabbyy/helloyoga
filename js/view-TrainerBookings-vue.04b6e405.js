(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-TrainerBookings-vue","view-BookingCountdown-vue","view-MessageBar-vue","view-NotificationMessage-vue"],{"0ae5":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.msg?i("div",{staticClass:"message-bar",class:{dark:t.dark}},[i("span",{domProps:{innerHTML:t._s(t.msg)}})]):i("div",{staticClass:"message-bar",class:{dark:t.dark}},[t._t("default")],2)},n=[],s=i("9ab4"),a=i("60a3");let c=class extends a["c"]{};s["__decorate"]([Object(a["b"])()],c.prototype,"msg",void 0),s["__decorate"]([Object(a["b"])({type:Boolean})],c.prototype,"dark",void 0),c=s["__decorate"]([Object(a["a"])({components:{}})],c);var r=c,l=r,u=(i("c1e3"),i("2877")),d=Object(u["a"])(l,o,n,!1,null,"59854c17",null);e["default"]=d.exports},"1a14":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"scheduled-requests"},[t.notificationMsg?o("NotificationMessage",{attrs:{msg:t.notificationMsg},on:{close:function(e){t.notificationMsg=null}}}):t._e(),o("div",{staticClass:"requests-list"},[t.bookings.length?o("div",{staticClass:"list-title"},[t._v(t._s(t.$t("trainerBookings.text1")))]):t._e(),t._l(t.bookings,function(e,n){return o("a",{key:"tbooking-"+n,staticClass:"request",on:{click:function(i){return i.stopPropagation(),t.timeUntilBooking(e)}}},[o("img",{staticClass:"avatar",attrs:{src:e.Participant.ProfilePictureUrl?e.Participant.ProfilePictureUrl:""+i("fad5")}}),o("h5",{staticClass:"name"},[t._v(t._s(e.Participant.FirstName+" "+e.Participant.LastName))]),o("h5",{staticClass:"time"},[t._v(t._s(t.getTime(e.TimeSlot.Start)))])])})],2)],1)},n=[],s=i("9ab4"),a=i("60a3"),c=i("b99e"),r=i("0ae5"),l=i("e29b"),u=i("59ef"),d=i("88c3");let m=class extends a["c"]{constructor(){super(...arguments),this.bookings=[],this.listenInterval=5e3,this.listenBooking=null,this.clientTimeDelta=0,this.notificationMsg=null,this.daysInWeek=[d["a"].t("sunday"),d["a"].t("monday"),d["a"].t("tuesday"),d["a"].t("wednesday"),d["a"].t("thursday"),d["a"].t("friday"),d["a"].t("saturday")],this.leadZero=(t=>t<10?t<0?"00":`0${t}`:`${t}`)}created(){c["a"].client.call.system.Time().response.then(t=>this.clientTimeDelta=new Date(t.Time).getTime()-Date.now())}mounted(){this.listenForBookings()}listenForBookings(){this.getBookings().then(()=>{this.listenBooking=window.setTimeout(()=>this.listenForBookings(),this.listenInterval)})}getBookings(){return c["a"].client.call.booking.get().response.then(t=>{this.bookings=t.filter(t=>!t.IsCancelled&&!t.IsUsed&&new Date(t.TimeSlot.End).getTime()>Date.now()+this.clientTimeDelta),this.bookings.length&&(this.bookings=this.bookings.sort((t,e)=>t.TimeSlot.Start>e.TimeSlot.Start?1:-1),this.checkNextBooking())})}checkNextBooking(){const t=new Date(this.bookings[0].TimeSlot.Start).getTime()-(Date.now()+this.clientTimeDelta);t<12e4&&this.$emit("timeUntilBooking",this.bookings[0])}timeUntilBooking(t){this.$emit("timeUntilBooking",t)}getTime(t){const e=this.getDayLabel(t),i=new Date(t).getHours(),o=new Date(t).getMinutes();return`${e} ${this.amPm(i,o)}`}getDayLabel(t){const e=new Date(t),i=new Date,o=new Date;return o.setDate(i.getDate()+1),e.getDate()===i.getDate()?d["a"].t("today").toString():e.getDate()===o.getDate()?d["a"].t("tomorrow").toString():`${this.daysInWeek[new Date(t).getDay()]} ${new Date(t).getMonth()+1}/${new Date(t).getDate()}`}amPm(t,e){const i=e&&e<10?this.leadZero(e):e;return t>12?`${t%12}${i?":"+i:""}pm`:t<12?`${t}${i?":"+i:""}am`:`12${i?":"+i:""}pm`}};s["__decorate"]([Object(a["b"])({default:!1})],m.prototype,"listen",void 0),m=s["__decorate"]([Object(a["a"])({components:{MessageBar:r["default"],BookingCountdown:l["default"],NotificationMessage:u["default"]}})],m);var g=m,h=g,f=(i("214a"),i("2877")),b=Object(f["a"])(h,o,n,!1,null,"27b35904",null);e["default"]=b.exports},"214a":function(t,e,i){"use strict";var o=i("e43d"),n=i.n(o);n.a},"59ef":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-notification",appear:""}},[i("div",{staticClass:"notification",class:{light:t.light},on:{click:function(e){return t.close()}}},[i("div",{staticClass:"msg",domProps:{innerHTML:t._s(t.msg)}})])])},n=[],s=i("9ab4"),a=i("60a3");let c=class extends a["c"]{constructor(){super(...arguments),this.autoHide=5e3}mounted(){this.hold||setTimeout(()=>this.close(),this.autoHide)}close(){this.$emit("close")}};s["__decorate"]([Object(a["b"])()],c.prototype,"msg",void 0),s["__decorate"]([Object(a["b"])({type:Boolean})],c.prototype,"light",void 0),s["__decorate"]([Object(a["b"])({type:Boolean})],c.prototype,"hold",void 0),c=s["__decorate"]([Object(a["a"])({components:{}})],c);var r=c,l=r,u=(i("5bc5"),i("2877")),d=Object(u["a"])(l,o,n,!1,null,"5463e194",null);e["default"]=d.exports},"5bc5":function(t,e,i){"use strict";var o=i("deeb"),n=i.n(o);n.a},"97af":function(t,e,i){},a576:function(t,e,i){},c1e3:function(t,e,i){"use strict";var o=i("a576"),n=i.n(o);n.a},cf0e:function(t,e,i){"use strict";var o=i("97af"),n=i.n(o);n.a},deeb:function(t,e,i){},e29b:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"booking-countdown"},[o("img",{staticClass:"avatar",attrs:{src:t.booking.Participant.ProfilePictureUrl?t.booking.Participant.ProfilePictureUrl:""+i("fad5")}}),o("div",{staticClass:"h4"},[t._v(t._s(t.$t("bookingCountdown.your"))+" "+t._s(t.booking.TrainingDuration-5+"min "+t.getTrainingType(t.booking.TrainingType))+" "+t._s(t.$t("bookingCountdown.sessionWith"))+" "+t._s(t.booking.Participant.FirstName)+" "+t._s(t.$t("bookingCountdown.startsIn")))]),t.timeLeft?o("div",{staticClass:"h1 time"},[t._v(t._s(t.timeLeft))]):t._e(),o("div",{staticClass:"intro-text"},[t._v(t._s(t.$t("bookingCountdown.introText")))]),o("div",{staticClass:"hint hidden-sm-and-up"},[t._v("*Switch to your tablet or laptop for a better experience")]),o("div",{staticClass:"hidden-sm-and-down w-100"},[o("button",{staticClass:"cancel",on:{click:t.cancelBooking,mouseleave:function(e){t.confirmCancel=null}}},[t._v(t._s(t.confirmCancel?t.$t("bookingCountdown.click"):t.$t("cancelSession")))]),o("button",{staticClass:"close",on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("close")))])]),o("div",{staticClass:"btn-group fixed hidden-md-and-up"},[o("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v(t._s(t.$t("close")))]),o("button",{staticClass:"cancel",on:{click:t.cancelBooking,mouseleave:function(e){t.confirmCancel=null}}},[t._v(t._s((t.confirmCancel,t.$t("cancelSession"))))])])])},n=[],s=i("9ab4"),a=i("60a3"),c=i("e0cf");let r=class extends a["c"]{constructor(){super(...arguments),this.timeLeft=null,this.listenCounter=null,this.timeDelta=new Date(this.systemTime).getTime()-Date.now(),this.confirmCancel=null,this.leadZero=(t=>t<10?t<0?"00":`0${t}`:`${t}`)}mounted(){this.countDown()}destroyed(){null!==this.listenCounter&&clearTimeout(this.listenCounter)}getTrainingType(t){const e=c["c"][t];return e.charAt(0).toUpperCase()+e.slice(1)}countDown(){this.calcTime(),null!==this.listenCounter&&this.timeToStart<=-1e3?(clearTimeout(this.listenCounter),this.$emit("startBookingSession",this.booking)):this.listenCounter=window.setTimeout(()=>this.countDown(),1e3)}calcTime(){this.timeToStart=new Date(this.booking.TimeSlot.Start).getTime()-Date.now()-this.timeDelta;const t=Math.floor(this.timeToStart/1e3/60/60),e=Math.floor(this.timeToStart/1e3/60%60),i=Math.floor(this.timeToStart/1e3%60);this.timeLeft=`${this.leadZero(t)}:${this.leadZero(e)}:${this.leadZero(i)}`}cancelBooking(){this.confirmCancel&&(this.$emit("cancelBooking",this.booking.Id),window.localStorage.setItem("cancelBooking","yes")),this.confirmCancel=!0}};s["__decorate"]([Object(a["b"])()],r.prototype,"booking",void 0),s["__decorate"]([Object(a["b"])()],r.prototype,"systemTime",void 0),r=s["__decorate"]([Object(a["a"])({components:{}})],r);var l=r,u=l,d=(i("cf0e"),i("2877")),m=Object(d["a"])(u,o,n,!1,null,"2b7cba77",null);e["default"]=m.exports},e43d:function(t,e,i){},fad5:function(t,e,i){t.exports=i.p+"img/avatar-dummy.10e80969.jpg"}}]);
//# sourceMappingURL=view-TrainerBookings-vue.04b6e405.js.map